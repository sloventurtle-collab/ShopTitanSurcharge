<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shop Titan Best Category for Surcharge Energy Usage</title>
  <style>
    :root {
      --bg: #0b1020;
      --card: rgba(255,255,255,0.06);
      --border: rgba(255,255,255,0.12);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.70);
      --accent: #6ee7ff;
      --good: #86efac;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 600px at 20% 10%, rgba(110,231,255,0.18), transparent 60%),
                  radial-gradient(900px 500px at 80% 20%, rgba(134,239,172,0.14), transparent 55%),
                  var(--bg);
    }
    header {
      padding: 28px 18px 10px;
      max-width: 1100px;
      margin: 0 auto;
    }
    h1 { margin: 0 0 8px; font-size: clamp(22px, 3.3vw, 34px); letter-spacing: -0.02em; }
    p { margin: 0; color: var(--muted); line-height: 1.5; }
    main { max-width: 1100px; margin: 0 auto; padding: 16px 18px 42px; display: grid; gap: 14px; }
    .grid { display: grid; gap: 14px; grid-template-columns: repeat(12, 1fr); }
    .card {
      grid-column: span 12;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 16px;
      box-shadow: 0 12px 28px rgba(0,0,0,0.35);
      backdrop-filter: blur(8px);
    }
    .kpi {
      display: grid;
      gap: 8px;
      grid-template-columns: repeat(12, 1fr);
      align-items: start;
    }
    .kpi .box {
      grid-column: span 12;
      padding: 14px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(0,0,0,0.18);
    }
    @media (min-width: 860px) {
      .kpi .box { grid-column: span 6; }
      .half { grid-column: span 6; }
    }
    .label { color: var(--muted); font-size: 12px; text-transform: uppercase; letter-spacing: 0.08em; }
    .value { font-size: 26px; margin-top: 6px; }
    .value strong { color: var(--good); }
    .hint { color: var(--muted); font-size: 13px; margin-top: 6px; }
    table {
      width: 100%;
      border-collapse: collapse;
      overflow: hidden;
      border-radius: 14px;
      border: 1px solid var(--border);
    }
    th, td { padding: 10px 10px; border-bottom: 1px solid rgba(255,255,255,0.08); }
    th { text-align: left; font-size: 12px; color: var(--muted); background: rgba(0,0,0,0.22); }
    tr:last-child td { border-bottom: none; }
    .row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }
    .pill {
      border: 1px solid var(--border);
      background: rgba(0,0,0,0.22);
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      color: var(--muted);
    }
    .chartWrap {
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 12px;
      background: rgba(0,0,0,0.18);
    }
    canvas { width: 100%; height: 240px; }
    footer { max-width: 1100px; margin: 0 auto; padding: 0 18px 24px; color: var(--muted); font-size: 12px; }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <header>
    <h1>Which Shop Titan category is best for surcharge energy usage?</h1>
  </header>

  <main>
    <section class="card kpi">
      <div class="box">
        <div class="label">Best category (average efficiency)</div>
        <div class="value"><strong>Dual Wield</strong> — 1,287.23 value/energy (avg)</div>
        <div class="hint">Interpretation: if you craft broadly within a category, this one gives the most value per surcharge energy on average.</div>
      </div>
      <div class="box">
        <div class="label">Best single item (peak efficiency)</div>
        <div class="value"><strong>Platinum Aura</strong> (Aurasong) — 4,532.25 value/energy</div>
        <div class="hint">Interpretation: if you cherry-pick the single most efficient blueprint, this is the top item overall.</div>
      </div>
    </section>

    <section class="card">
      <div class="row">
        <div>
          <div class="label">Top 10 categories by average value per surcharge energy</div>
          <div class="hint">Includes item count, average, median, and max within each category.</div>
        </div>
        <div class="pill">Metric: Value per surcharge energy</div>
      </div>
      <div class="chartWrap">
        <canvas id="bar"></canvas>
      </div>
      <div style="margin-top:12px; overflow:auto">
        <table>
          <thead>
            <tr>
              <th>Category</th>
              <th style="text-align:right">Items</th>
              <th style="text-align:right">Avg</th>
              <th style="text-align:right">Median</th>
              <th style="text-align:right">Max</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Dual Wield</td><td style='text-align:right'>16</td><td style='text-align:right'>1,287.23</td><td style='text-align:right'>793.27</td><td style='text-align:right'>3,642.86</td></tr>
<tr><td>Aurasong</td><td style='text-align:right'>19</td><td style='text-align:right'>1,166.33</td><td style='text-align:right'>782.31</td><td style='text-align:right'>4,532.25</td></tr>
<tr><td>Familiar</td><td style='text-align:right'>16</td><td style='text-align:right'>1,082.38</td><td style='text-align:right'>593.76</td><td style='text-align:right'>3,892.62</td></tr>
<tr><td>Instrument</td><td style='text-align:right'>19</td><td style='text-align:right'>1,062.00</td><td style='text-align:right'>773.20</td><td style='text-align:right'>3,450.86</td></tr>
<tr><td>Cloak</td><td style='text-align:right'>26</td><td style='text-align:right'>1,056.20</td><td style='text-align:right'>889.32</td><td style='text-align:right'>4,443.13</td></tr>
<tr><td>Dessert</td><td style='text-align:right'>24</td><td style='text-align:right'>1,050.14</td><td style='text-align:right'>916.73</td><td style='text-align:right'>3,374.23</td></tr>
<tr><td>Quiver</td><td style='text-align:right'>13</td><td style='text-align:right'>973.04</td><td style='text-align:right'>667.98</td><td style='text-align:right'>2,358.78</td></tr>
<tr><td>Gun</td><td style='text-align:right'>34</td><td style='text-align:right'>898.22</td><td style='text-align:right'>545.43</td><td style='text-align:right'>2,764.98</td></tr>
<tr><td>Light Armor</td><td style='text-align:right'>45</td><td style='text-align:right'>885.24</td><td style='text-align:right'>432.04</td><td style='text-align:right'>4,289.22</td></tr>
<tr><td>Clothes</td><td style='text-align:right'>46</td><td style='text-align:right'>884.66</td><td style='text-align:right'>481.04</td><td style='text-align:right'>4,129.61</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="card">
      <div class="row">
        <div>
          <div class="label">Best item in each category (top 8 shown)</div>
          <div class="hint">Shows each category’s most efficient blueprint by value/energy.</div>
        </div>
        <div class="pill">Peak per category</div>
      </div>
      <div style="overflow:auto">
        <table>
          <thead>
            <tr>
              <th>Category</th>
              <th>Best Item</th>
              <th style="text-align:right">Surcharge Energy</th>
              <th style="text-align:right">Value</th>
              <th style="text-align:right">Value/Energy</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Aurasong</td><td>Platinum Aura</td><td style='text-align:right'>8,605</td><td style='text-align:right'>39,000,000</td><td style='text-align:right'>4,532.25</td></tr>
<tr><td>Cloak</td><td>Platinum Cloak</td><td style='text-align:right'>8,440</td><td style='text-align:right'>37,500,000</td><td style='text-align:right'>4,443.13</td></tr>
<tr><td>Crossbow</td><td>Platinum Crossbow</td><td style='text-align:right'>8,295</td><td style='text-align:right'>36,500,000</td><td style='text-align:right'>4,400.24</td></tr>
<tr><td>Shield</td><td>Platinum Ward</td><td style='text-align:right'>8,150</td><td style='text-align:right'>35,000,000</td><td style='text-align:right'>4,294.48</td></tr>
<tr><td>Light Armor</td><td>Platinum Gambeson</td><td style='text-align:right'>8,160</td><td style='text-align:right'>35,000,000</td><td style='text-align:right'>4,289.22</td></tr>
<tr><td>Spear</td><td>Platinum Lance</td><td style='text-align:right'>8,085</td><td style='text-align:right'>34,500,000</td><td style='text-align:right'>4,267.16</td></tr>
<tr><td>Dagger</td><td>Platinum Katar</td><td style='text-align:right'>7,870</td><td style='text-align:right'>32,500,000</td><td style='text-align:right'>4,129.61</td></tr>
<tr><td>Clothes</td><td>Platinum Robe</td><td style='text-align:right'>7,870</td><td style='text-align:right'>32,500,000</td><td style='text-align:right'>4,129.61</td></tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <footer>
  <p>
    Data source: <strong>Shop Titans Data Spreadsheet | c: v22.2.1 / v1.0.2.968 cleaned to Blueprint doc.xlsx</strong> |
    Metric: Value per Surcharge Energy |
    <a href="Blueprint_doc.xlsx" download>Download raw data</a>
  </p>
  </footer>

  <script>
    const data = [{"Type": "Dual Wield", "avg_value_per_energy": 1287.228678121875}, {"Type": "Aurasong", "avg_value_per_energy": 1166.3339832673682}, {"Type": "Familiar", "avg_value_per_energy": 1082.3811380125}, {"Type": "Instrument", "avg_value_per_energy": 1062.004601553158}, {"Type": "Cloak", "avg_value_per_energy": 1056.2036868276923}, {"Type": "Dessert", "avg_value_per_energy": 1050.1373872279166}, {"Type": "Quiver", "avg_value_per_energy": 973.0374301184615}, {"Type": "Gun", "avg_value_per_energy": 898.2211332832353}, {"Type": "Light Armor", "avg_value_per_energy": 885.2362188204444}, {"Type": "Clothes", "avg_value_per_energy": 884.6605211638262}];
    const canvas = document.getElementById('bar');
    const ctx = canvas.getContext('2d');

    function resize() {
      const dpr = window.devicePixelRatio || 1;
      const rect = canvas.getBoundingClientRect();
      canvas.width = Math.max(300, Math.floor(rect.width * dpr));
      canvas.height = Math.max(240, Math.floor(rect.height * dpr));
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      draw();
    }

    function draw() {
      const w = canvas.getBoundingClientRect().width;
      const h = canvas.getBoundingClientRect().height;
      ctx.clearRect(0,0,w,h);

      const padding = { left: 46, right: 16, top: 16, bottom: 36 };
      const plotW = w - padding.left - padding.right;
      const plotH = h - padding.top - padding.bottom;

      const maxV = Math.max(...data.map(d => d.avg_value_per_energy)) * 1.05;
      const barCount = data.length;
      const gap = 10;
      const barW = (plotW - gap*(barCount-1)) / barCount;

      // axes
      ctx.globalAlpha = 0.9;
      ctx.fillStyle = 'rgba(255,255,255,0.75)';
      ctx.font = '12px ui-sans-serif, system-ui';
      ctx.textAlign = 'right';
      ctx.textBaseline = 'middle';

      const ticks = 4;
      for (let i=0;i<=ticks;i++) {
        const v = maxV * (i/ticks);
        const y = padding.top + plotH - plotH*(i/ticks);
        ctx.fillText(Math.round(v).toLocaleString(), padding.left - 8, y);
        ctx.strokeStyle = 'rgba(255,255,255,0.10)';
        ctx.beginPath();
        ctx.moveTo(padding.left, y);
        ctx.lineTo(padding.left + plotW, y);
        ctx.stroke();
      }

      // bars
      ctx.textAlign = 'center';
      ctx.textBaseline = 'top';
      data.forEach((d, i) => {
        const x = padding.left + i*(barW + gap);
        const bh = (d.avg_value_per_energy / maxV) * plotH;
        const y = padding.top + plotH - bh;

        // bar
        ctx.fillStyle = 'rgba(110,231,255,0.50)';
        ctx.strokeStyle = 'rgba(255,255,255,0.18)';
        roundRect(ctx, x, y, barW, bh, 10, true, true);

        // label
        ctx.fillStyle = 'rgba(255,255,255,0.75)';
        ctx.font = '11px ui-sans-serif, system-ui';
        ctx.save();
        ctx.translate(x + barW/2, padding.top + plotH + 6);
        ctx.rotate(-0.35);
        ctx.fillText(d.Type, 0, 0);
        ctx.restore();
      });
    }

    function roundRect(ctx, x, y, width, height, radius, fill, stroke) {
      const r = Math.min(radius, width/2, height/2);
      ctx.beginPath();
      ctx.moveTo(x + r, y);
      ctx.arcTo(x + width, y, x + width, y + height, r);
      ctx.arcTo(x + width, y + height, x, y + height, r);
      ctx.arcTo(x, y + height, x, y, r);
      ctx.arcTo(x, y, x + width, y, r);
      ctx.closePath();
      if (fill) ctx.fill();
      if (stroke) ctx.stroke();
    }

    window.addEventListener('resize', resize);
    resize();
  </script>
</body>
</html>
